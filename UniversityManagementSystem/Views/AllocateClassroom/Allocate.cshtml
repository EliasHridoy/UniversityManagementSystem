@using UniversityManagementSystem.Models
@using UniversityManagementSystem.Models.ViewModel
@model AllocateClassroomModel
@{
    Layout = null;

    List<DepartmentModel> departments = ViewBag.departments;
    List<DayViewModel> days = ViewBag.days;
    List<RoomViewModel> rooms = ViewBag.rooms;
    string message = ViewBag.message;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Allocate</title>
    <link href="~/Content/MyDesign/NavBar.css" rel="stylesheet" />


</head>
<body>


    <!-- navBar -->


    <ul>



        <li class="dropdown">
            <a href="javascript:void(0)" class="dropbtn">Unassign</a>
            <div class="dropdown-content">
                <a href="#">Unassign All Courses </a>
                <a href="#">Unallocate All Classroom</a>
            </div>
        </li>
        <li class="dropdown">
            <a href="javascript:void(0)" class="dropbtn">Menu</a>
            <div class="dropdown-content">
                <a href="http://localhost:3036/RegisterStudent/Save">Register Student</a>
                <a href="http://localhost:3036/AllocateClassroom/Allocate">Allocate Classroom</a>
                <a href="http://localhost:3036/ViewClassSchedule/ViewClassSchedule">View Class Schedule and Room</a>

                <a href="http://localhost:3036/EnrollCourse/Enroll"> Enroll In a Course </a>
                <a href="http://localhost:3036/StudentRsult/Save"> Save Student Result</a>
                <a href="http://localhost:3036/ViewResult/ViewResult"> View Result </a>

            </div>
        </li>


        <li class="dropdown">
            <a href="javascript:void(0)" class="dropbtn">Category</a>
            <div class="dropdown-content">
                <a href="http://localhost:3036/Department/Save">Save Department</a>
                <a href="http://localhost:3036/ViewDepartment/ViewAllDepartment">View All Department</a>
                <a href="http://localhost:3036/SaveCourse/Save">Save Course</a>
                <a href="http://localhost:3036/SaveTeacher/Save">Save Teacher</a>
                <a href="http://localhost:3036/CourseToTeacher/Save">Course Assign To Teacher</a>
                <a href="http://localhost:3036/ViewCourseStatics/ViewCourse">View Course Statics</a>
            </div>
        </li>

        <li><a href="#">Home</a></li>
        <li><a href="#">News</a></li>
    </ul>

    <!-- navBar -->

<div>




    @using (@Html.BeginForm())
    {
        <table>

            <tr>
                <td>
                    @Html.Label("Department")
                </td>
                <td>
                    @Html.DropDownList("DepartmentId", new SelectList(departments, "Id", "Code"), "--Select--", "")
                    @Html.ValidationMessageFor(x=>x.DepartmentId)
                </td>
            </tr>
            <tr>
                <td>
                    @Html.Label("Course")
                </td>
                <td>
                    @Html.DropDownList("CourseId", new SelectList(""))
                    @Html.ValidationMessageFor(x=>x.CourseId)
                </td>
            </tr>
            <tr>
                <td>
                    @Html.Label("Room No")
                </td>
                <td>
                    @Html.DropDownList("RoomId", new SelectList(rooms, "Id", "RoomNo"), "--Select--", "")
                @Html.ValidationMessageFor(x => x.CourseId)
                </td>
            </tr>
            <tr>
                <td>
                    @Html.Label("Day")
                </td>
                <td>
                    @Html.DropDownList("DayId", new SelectList(days, "Id", "Day"), "--Select--", "")
                @Html.ValidationMessageFor(x => x.DayId)
                </td>
            </tr>
            <tr>
                <td>
                    @Html.Label("From Time")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.FromTime)
                    @Html.ValidationMessageFor(x => x.FromTime)
                </td>
            </tr>
            <tr>
                <td>
                     @Html.Label("To Time")
                </td>
                <td>
                    @Html.TextBoxFor(x => x.ToTime)
                    
                    @Html.ValidationMessageFor(x => x.ToTime)
                </td>
            </tr>

            <tr>
                <td>@message</td>
                <td>
                    <input type="submit" value="Allocate"/>
                </td>
            </tr>
        </table>
    }


    <script src="~/Scripts/jquery-1.12.4.min.js"></script>
    <script>
        $(document).ready(function() {

            $('#DepartmentId').change(function() {

                var departmentId = $('#DepartmentId').val();

                var json = { departmentId: departmentId };

                $.ajax({
                    type: "POST",

                    url: '@Url.Action("GetCoursesByDepartmentId", "AllocateClassroom")',
                    //url: '/ViewCourse/ViewCourseStatics',

                    contentType: "application/json; charset=utf-8",

                    data: JSON.stringify(json),

                    success: function(data) {


                        //$("#StudentDetails").empty();
                        $("#CourseId").empty();
                        $("#CourseId").append('<option value="">--Select--</option>');


                        $.each(data, function(key, value) {

                            $("#CourseId").append('<option value=' + value.Id + '>' + value.Name + '</option>');
                            //$("#CourseDetails").append('<tr> <td> ' + value.Code + ' </td> <td>' + value.Name + '</td>   <td>' + value.Semester + '</td>   <td>' + value.AssignedTo + '</td></tr>')
                        });

                    }


                });
            });

        });

    </script>





    <script src="~/Scripts/jquery-1.12.4.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

    <script src="~/Content/TimePicker/JqueryTimePicker.js"></script>
    <link href="~/Content/TimePicker/JqueryTimePicker.css" rel="stylesheet"/>
    <script>
    $('#FromTime').timepicker();
    $('#ToTime').timepicker();
    </script>


</div>
</body>
</html>
