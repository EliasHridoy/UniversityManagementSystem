@using UniversityManagementSystem.Models.ViewModel
@using UniversityManagementSystem.Models
@model StudentResultModel
@{
    Layout = null;
    List<StudentCourseViewModel> RegNOs = ViewBag.studentRegNos;
    List<GradeLetterModel> gradeLetters = ViewBag.gradeLetter;

    string message = ViewBag.message;


}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Save</title>
</head>
<body>
<div>


    @using (@Html.BeginForm())
    {
        <table>

            <tr>
                <td>@Html.Label("Student RegNo")</td>
                <td>@Html.DropDownList("StudentId", new SelectList(RegNOs, "Id", "RegNo"), "--Select--")</td>
                <td></td>
            </tr>
            <tr>
                <td>@Html.Label("Name")</td>
                <td>@Html.TextBox("Name") </td>
            </tr>
            <tr>
                <td>@Html.Label("Email")</td>
                <td>@Html.TextBox("Email") </td>
            </tr>
            <tr>
                <td>@Html.Label("Department")</td>
                <td>@Html.TextBox("DepartmentName")</td>

            </tr>

            <tr>
        <td>@Html.Label("Select Course")</td>
        <td>
            @Html.DropDownList("CourseId", new SelectList(""), "--Select--")
        </td>
        <td></td>
    </tr>
        <tr>
        <td>@Html.Label("Select Grade")</td>
        <td>
            @Html.DropDownList("GradeLetters", new SelectList(gradeLetters,"Id", "GradeLetter"), "--Select--")
        </td>
        <td></td>
    </tr>
    
            <tr>
                <td>@message</td>
                <td>
                    <input type="submit" value="Save" />
                </td>
                <td></td>
            </tr>

        </table>
    }







</div>










    <script src="~/Scripts/jquery-1.10.2.min.js"></script>



    <script>
                    $(document).ready(function () {

                            $('#StudentId').change(function () {

                                var StudentId = $('#StudentId').val();

                                var json = { studentId: StudentId };

                                $.ajax({
                                    type: "POST",

                                    url: '@Url.Action("StudentById", "EnrollCourse")',
                                    //url: '/ViewCourse/ViewCourseStatics',

                                    contentType: "application/json; charset=utf-8",

                                    data: JSON.stringify(json),

                                    success: function (data) {


                                        //$("#StudentDetails").empty();
                                        $("#studentDetails").empty();
                                        //$("#studentDetails").append('<option value="">--Select--</option>');


                                        //$("#Name").append(data.Name);
                                        //$("#Email").append(data.Email);
                                        //$("#DepartmentName").append(data.DepartmentName);


                                        $("#Name").val(data.Name);
                                        $("#Email").val(data.Email);
                                        $("#DepartmentName").val(data.DepartmentName);



            //$.each(data, function (key, value) {

                                        //   // $("#studentDetails").append('<option value=' + value.Id + '>' + value.Name + '</option>');
                                        //   $("#CourseDetails").append('<tr> <td> Name </td> <td> ' + value.Name + ' </td> </tr> ' +
                                        //       '<tr> <td> Email </td> <td>' + value.Email + '</td>  </tr>' +
                                        //       ' <tr> <td> Department </td> <td>' + value.Department + '</td>  </tr>')
                                        //});

                                    }


                                });
                            });

                    });



                    $(document).ready(function () {

                        $('#StudentId').change(function () {

                            var StudentId = $('#StudentId').val();

                            var json = { studentId: StudentId };

                            $.ajax({
                                type: "POST",

                                url: '@Url.Action("Courses", "EnrollCourse")',


                                contentType: "application/json; charset=utf-8",

                                data: JSON.stringify(json),

                                success: function (data) {


                                    $("#CourseId").empty();
                                    $("#CourseId").append('<option value="">--Select--</option>');

                                    $.each(data, function (key, value) {

                                        $("#CourseId").append('<option value=' + value.CourseId + '>' + value.CoursesName + '</option>');

                                    });

                                }


                            });
                        });

                    });

    </script>




</body>
</html>
